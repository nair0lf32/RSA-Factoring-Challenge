#!/usr/bin/python3
import sys
import math
"""Factorizes as many numbers as possible into a product of 2 smaller nums"""


def get_nums(file):
    """gets the factors of a number"""
    with open(file) as f:
        return [int(line.strip()) for line in f.readlines()]


def factorize(n):
    res = []
    """factorize a number"""
    if n % 2 == 0:
        res = [2] + factorize(n // 2)
        return res
    else:
        square_root = int(math.sqrt(n)) + 1
        for i in range(3, square_root, 2):
            if n % i == 0:
                res = [i] + factorize(n // i)
                return res
            if n % (square_root - i) == 0:
                res = [i, square_root - i]
                res += factorize(n // (i + (square_root - i)))
                return res
            if n % (square_root + i) == 0:
                res = [i, square_root + i]
                res += factorize(n // (i + (square_root + i)))
                return res
        return [n]


def main():
    """entry point"""
    if len(sys.argv) != 2:
        print("Usage: factors.py <file>")
        sys.exit(1)
    nums = get_nums(sys.argv[1])
    for n in nums:
        factors = factorize(n)
        print("{} = {}".format(n, " * ".join(map(str, factors))))


if __name__ == "__main__":
    main()
