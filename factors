#!/usr/bin/python3
import sys
import math
"""Factorizes as many numbers as possible into a product of 2 smaller nums"""


def get_nums(file):
    """gets the numbers from file"""
    nums = []
    with open(file, encoding='utf-8') as f:
        for line in f.readlines():
            nums += int(line)
    return nums


def factorize(n):
    """factorize a number"""
    result = [1]
    if n % 2 == 0:
        result = [2] + factorize(n // 2)
        return result
    else:
        sqr = int(math.sqrt(n)) + 1
        for i in range(3, sqr, 2):
            if n % i == 0:
                result = [i] + factorize(n // i)
                return result
            if n % (sqr - i) == 0:
                result = [i, sqr - i]
                result += factorize(n // (i + (sqr - i)))
                return result
            if n % (sqr + i) == 0:
                result = [i, sqr + i]
                result += factorize(n // (i + (sqr + i)))
                return result
        result = [n]
        return result


def main(args):
    """entry point"""
    if len(args) != 2:
        print("Usage: factors.py <file>")
        sys.exit(1)
    nums = get_nums(args[1])
    for n in nums:
        factors = factorize(n)
        print("{} = {}".format(n, " * ".join(map(str, factors))))


if __name__ == "__main__":
    main(sys.argv[1:])
